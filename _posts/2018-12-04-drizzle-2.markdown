---
layout: post
title: "Unbox drizzle(2)"
date: 2018-12-04
description: # Add post description (optional)
img: truffle.jpg
tag: [Ethereum, Solidity, Truffle, drizzle, Dapp]
---

ì›ë˜ react-reduxì—ì„œëŠ” `connect`ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ë“œë¦¬ì¦ì—ì„œëŠ” `drizzleConnect`ë¥¼ í†µí•´ì„œ í™”ë©´ ì»´í¬ë„ŒíŠ¸ì¸ Homeì„ ìƒíƒœì— ì—°ê²°í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆëŠ” storeë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•´ì„œëŠ”
ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ storeì˜ ì •ë³´ë¥¼ ì œê³µí•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ê²ƒì€ ë‹¤ìŒê³¼ ê°™ì´ `DrizzleProvider`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆ, ì›ë˜ react-reduxì—ì„œëŠ” `Provider`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.

ì†ì„±ìœ¼ë¡œ storeë¥¼ ì „ë‹¬í•˜ê³  ìˆê³  App ì»´í¬ë„ŒíŠ¸ëŠ” HomeContainerë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. LoadingContainerëŠ” ë“œë¦¬ì¦ì´ ì œê³µí•´ì£¼ëŠ” ê¸°ë³¸ ë‚´ì¥ ì»´í¬ë„ŒíŠ¸ë¡œ web3ë¥¼ í†µí•œ ë©”íƒ€ë§ˆìŠ¤í¬ì™€ì˜ ì—°ê²°ì„ ë‹´ë‹¹í•˜ê³  ìˆìŠµë‹ˆë‹¤.

{% highlight html %}
ReactDOM.render((
    <DrizzleProvider options={drizzleOptions} store={store}>
      <LoadingContainer>
        <Router history={history} store={store}>
          <Route exact path="/" component={App} />
        </Router>
      </LoadingContainer>
    </DrizzleProvider>
  ),
  document.getElementById('root')
);
{% endhighlight %}

reduxëŠ” ìƒíƒœë¥¼ storeì—ì„œ ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œğŸ˜… ê´€ë¦¬í•©ë‹ˆë‹¤. ë“œë¦¬ì¦ì€ store.jsì—ì„œ storeë¥¼ ìƒì„±í•©ë‹ˆë‹¤. createStoreë¼ëŠ” í•¨ìˆ˜ì— ì—¬ëŸ¬ íŒŒë¼ë¯¸í„°ë“¤ì„ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.
storeë¥¼ ìƒì„±í•  ë•ŒëŠ” ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” reducer, ë˜ ê° ìƒíƒœì˜ ì´ˆê¸°ìƒíƒœì¸ initialState, ê·¸ë¦¬ê³  store enhancerë¥¼ í•¨ê»˜ ë„˜ê²¨ì¤„ ìˆ˜ ìˆëŠ”ë° ì—¬ê¸°ì„œëŠ”
ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. enhancerê°€ í•˜ë‚˜ ì´ìƒì´ë¯€ë¡œ `composeEnhancers`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

{% highlight javascript %}
const sagaMiddleware = createSagaMiddleware()

const initialState = {
  contracts: generateContractsInitialState(drizzleOptions)
}

const store = createStore(
  reducer,
  initialState,
  composeEnhancers(
      applyMiddleware(
        thunkMiddleware,
        routingMiddleware,
        sagaMiddleware
      )
  )
)
{% endhighlight %}

Dappì—ì„œëŠ” ì»¨íŠ¸ë™íŠ¸ì˜ ìƒíƒœê°€ ì¤‘ìš”í•˜ë¯€ë¡œ `drizzleOptions`ë¼ëŠ” ê°ì²´ì— ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ë¥¼ importí•˜ì—¬ initialStateë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. drizzleOptions.jsë¥¼ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
ì»´íŒŒì¼ë˜ì–´ jsonìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì˜ artifactë¥¼ ì°¸ì¡°í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ web3ì— ì„¤ì •í•œ fallback urlì€ ë©”íƒ€ë§ˆìŠ¤í¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì˜ë¯¸ê°€ ì—†ê² ìŠµë‹ˆë‹¤.

{% highlight javascript %}
import ComplexStorage from './../build/contracts/ComplexStorage.json'
import SimpleStorage from './../build/contracts/SimpleStorage.json'
import TutorialToken from './../build/contracts/TutorialToken.json'

const drizzleOptions = {
  web3: {
    block: false,
    fallback: {
      type: 'ws',
      url: 'ws://127.0.0.1:8545'
    }
  },
  contracts: [
    ComplexStorage,
    SimpleStorage,
    TutorialToken
  ],
  events: {
    SimpleStorage: ['StorageSet']
  },
  polls: {
    accounts: 5000
  }
}

export default drizzleOptions
{% endhighlight %}


ì„¸ë¶€ì ì¸ ì‚¬í•­ë“¤ì€ ì°¨ì°¨ ì‚´í´ë³´ê¸°ë¡œ í•˜ê³  ì „ì²´ì ì¸ íë¦„ì„ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ storeì— ì ‘ê·¼í•˜ê±°ë‚˜ ì•¡ì…˜ì„ dispatchí•˜ë ¤ë©´ reduxì˜ Providerì™€ connectë¥¼
í†µí•´ ì—°ê²°í•©ë‹ˆë‹¤.


![fig08]({{site.baseurl}}/assets/img/drizzle/Fig08.PNG)


### 3. redux-saga

ë“œë¦¬ì¦ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•˜ëŠ” ê²ƒì€ redux-saga ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œ <b>ë¯¸ë“¤ì›¨ì–´(middleware)</b>ì˜ í™œìš©ì…ë‹ˆë‹¤. createStoreë¥¼ ë‹¤ì‹œ ë³´ê² ìŠµë‹ˆë‹¤. applyMiddlewareëŠ” reduxê°€ ì™¸ë¶€ ë¯¸ë“¤ì›¨ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬
ì‚¬ìš©ì„ ìœ„í•´ ì œê³µí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

{% highlight javascript %}
const store = createStore(
  reducer,
  initialState,
  composeEnhancers(
      applyMiddleware(
        //thunkMiddleware,
        routingMiddleware,
        sagaMiddleware
      )
  )
)

sagaMiddleware.run(rootSaga)
{% endhighlight %}

ì—¬ê¸°ì„œ thunkMiddlewareì™€ sagaMiddlewareëŠ” ìœ ì‚¬í•œ ì—­í• ì„ í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ë“œë¦¬ì¦ì—ì„œëŠ” sagaMiddlewareë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ thunkMiddlewareëŠ” ì—†ì–´ë„ ë˜ê² ìŠµë‹ˆë‹¤.
ë¯¸ë“¤ì›¨ì–´ëŠ” ì•¡ì…˜ì´ dispatchë˜ì–´ reducerì— ì „ë‹¬ë  ë•Œ ì¤‘ê°„ì—ì„œ ë‹¤ë¥¸ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ì€ ë¸”ë¡ì´ ìƒì„±ë˜ê³  í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì— ì˜í•´ í™•ì •ë  ë•Œê¹Œì§€ ì‹œê°„ì´ ê±¸ë¦¬ê¸° ë•Œë¬¸ì— <b>ë¹„ë™ê¸°ì </b>ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì•¡ì…˜ì´ dispatchë˜ê³  ë‚˜ë©´
reducerê°€ ì‹¤í–‰ë˜ë¯€ë¡œ ì¦‰ì‹œ ë¦¬í„´ì´ ì˜¤ì§€ ì•ŠëŠ” ìƒí™©ì—ì„œëŠ” ë‹¤ìŒ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì–´ë µê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¤‘ê°„ì—ì„œ ì‘ë‹µì´ ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ëŠ” ëˆ„êµ°ê°€ê°€ í•„ìš”í•œë°
ë°”ë¡œ ê·¸ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ redux-sagaê°€ ë˜ê² ìŠµë‹ˆë‹¤.

storeë¥¼ ìƒì„±í•œ í›„ `sagaMiddleware.run(rootSaga)`ë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. rootSaga.jsë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

{% highlight javascript %}
export default function * root() {
  yield all(
      drizzleSagas.map(saga => fork(saga))
  )
}
{% endhighlight %}

`function *`ì€ ES6ì—ì„œ Generator í•¨ìˆ˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. Generator í•¨ìˆ˜ëŠ” ì‹¤í–‰ ì¤‘ì— ë‚´ë¶€ì—ì„œ yield ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ë©´ ì‹¤í–‰ì„ ë©ˆì¶”ê³  ê·¸ íë¦„ì„ ì–‘ë³´(yield)í•˜ëŠ”
í•¨ìˆ˜ì…ë‹ˆë‹¤. ì–‘ë³´í•œ í•¨ìˆ˜ê°€ ì‹¤í–‰ì„ ë§ˆì¹˜ê³  ë‚˜ë©´ ë©ˆì¶”ì—ˆë˜ ê³³ìœ¼ë¡œ ë˜ëŒì•„ê°€ì„œ í•˜ë˜ ì¼ì„ ê³„ì† ìˆ˜í–‰í•©ë‹ˆë‹¤(ì˜í™”ë¥¼ ë³´ë‹¤ê°€ ì¼ì‹œì •ì§€í•˜ê³  í™”ì¥ì‹¤ì— ë‹¤ë…€ì˜¨ í›„ ë‹¤ì‹œ í”Œë ˆì´ë¥¼ ëˆ„ë¥´ëŠ” ê²ƒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤).

all(drizzleSagas.map(saga => fork(saga)))ì—ì„œ ì§ì‘í•  ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ ë“œë¦¬ì¦ ëª¨ë“ˆì€ ëª‡ ê°œì˜ sagaë¥¼ êµ¬í˜„í•˜ì—¬ ì œê³µí•˜ê³  ìˆìœ¼ë©°, ì´ê²ƒì„ `all([...effects])`ë¥¼ í†µí•´
 `fork`í•˜ê³  ìˆìŠµë‹ˆë‹¤. allì€ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ë©´ì„œ ëª¨ë‘ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. allì´ë‚˜ fork ê°™ì€ í•¨ìˆ˜ë“¤ì„ effect creatorë¼ê³  í•˜ëŠ”ë° ì—¬ê¸°ì„œ <b>effect</b>ë¼ê³  í•˜ëŠ” ê²ƒì€
yieldì— ì˜í•´ ë„˜ê²¨ ë°›ì€ ì‹¤í–‰ íë¦„ì„ ë¯¸ë“¤ì›¨ì–´ì—ê²Œ ì „ë‹¬í•˜ëŠ” ì‘ì—…ëª…ë ¹(instruction) ê°™ì€ ê²ƒì´ë¼ê³  ë³´ë©´ ë˜ê² ìŠµë‹ˆë‹¤.

>In redux-saga, Sagas are implemented using Generator functions. To express the Saga logic, we yield plain JavaScript Objects from the Generator. We call those Objects Effects. An Effect is simply an object that contains some information to be interpreted by the middleware. You can view Effects like instructions to the middleware to perform some operation (e.g., invoke some asynchronous function, dispatch an action to the store, etc.).


ê·¸ë ‡ë‹¤ë©´ ë“œë¦¬ì¦ ëª¨ë“ˆì—ì„œ ì œê³µí•˜ëŠ” saga í•¨ìˆ˜ë“¤ì€ ì–´ë–¤ ê²ƒë“¤ì´ ìˆì„ê¹Œìš”? ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆìŠµë‹ˆë‹¤([drizzle Github][drizzle-gh]).

{% highlight javascript %}
var drizzleSagas = [
    accountsSaga,
    accountBalancesSaga,
    blocksSaga,
    contractsSaga,
    drizzleStatusSaga,
    web3Saga
]
{% endhighlight %}

ì–¼í• ë³´ì•„ë„ ë¸”ë¡ì²´ì¸ì—ì„œ ì¤‘ìš”í•œ ê°’ë“¤ì…ë‹ˆë‹¤. ê³„ì •(account), ê³„ì •ì”ì•¡(accountBalance), ë¸”ë¡(block), ì»¨íŠ¸ë™íŠ¸(contract), web3 ë“±ì´ redux-sagaë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ accountsSaga.jsë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

{% highlight javascript %}
function * accountsSaga () {
    yield takeLatest('ACCOUNTS_FETCHING', getAccounts)
    yield takeLatest('ACCOUNTS_POLLING', callCreateAccountsPollChannel)
}

export default accountsSaga
{% endhighlight %}

`takeLatest(pattern, saga, ...args)`ëŠ” patternì— í•´ë‹¹í•˜ëŠ” ì•¡ì…˜ì´ dispatchë  ë•Œë§ˆë‹¤ ê°€ì¥ ìµœê·¼ ì•¡ì…˜ì— ëŒ€í•´ saga í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” redux-saga helperì…ë‹ˆë‹¤.
ê·¸ëŸ¬ë‹ˆê¹Œ yield takeLatest('ACCOUNTS_FETCHING', getAccounts)ì€ 'ACCOUNTS_FETCHING'ì´ dispatchë˜ë©´ ì´ì œê¹Œì§€ dispatchëœ ìš”ì²­ë“¤ ì¤‘ ê°€ì¥ ë§ˆì§€ë§‰ì— ëŒ€í•´ì„œë§Œ
ë‹¤ë¥¸ saga í•¨ìˆ˜ì¸ getAccountsë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. getAccountsëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

{% highlight javascript %}
export function * getAccounts (action) {
  const web3 = action.web3

  try {
      const accounts = yield call(web3.eth.getAccounts)

      if (!accounts) {
        throw 'No accounts found!'
      }

      yield put({ type: 'ACCOUNTS_FETCHED', accounts })
  } catch (error) {
      yield put({ type: 'ACCOUNTS_FAILED', error })
      console.error('Error fetching accounts:')
      console.error(error)
  }
}
{% endhighlight %}

`call`ê³¼ `put`ì€ ìœ„ì—ì„œ ì–¸ê¸‰í•œ effect creatorë“¤ì…ë‹ˆë‹¤. callì€ í•¨ìˆ˜ ì‹¤í–‰ì„, putì€ ì•¡ì…˜ì„ dispatchí•˜ë¼ëŠ” effectë¥¼ ë¯¸ë“¤ì›¨ì–´ì¸ redux-sagaì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´ì„œ
getAccountsëŠ” web3.eth.getAccounts í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ (call) ë¦¬í„´ ë°›ì€ ê³„ì •ë“¤ì„ ì•¡ì…˜ì— ë‹´ê³  ë‹¤ì‹œ 'ACCOUNTS_FETCHED'ë¼ëŠ” ì•¡ì…˜ì„ dispatchí•©ë‹ˆë‹¤(put).


### 4. reducer

ë“œë¦¬ì¦ì€ ì—¬ëŸ¬ ê°œì˜ ë¦¬ë“€ì„œë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— combineReducersë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

{% highlight javascript %}
import { combineReducers } from 'redux'
import { routerReducer } from 'react-router-redux'
import { drizzleReducers } from 'drizzle'

const reducer = combineReducers({
  routing: routerReducer,
  ...drizzleReducers
})

export default reducer
{% endhighlight %}

ë“œë¦¬ì¦ì—ì„œ ì œê³µë˜ëŠ” reducerë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

{% highlight html %}
{
    accounts: accountsReducer,
    accountBalances: accountBalancesReducer,
    contracts: contractsReducer,
    drizzleStatus: drizzleStatusReducer,
    transactions: transactionsReducer,
    transactionStack: transactionStackReducer,
    web3: web3Reducer
}
{% endhighlight %}

ì˜ˆë¥¼ ë“¤ì–´ accountReducer.jsëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. redux-saga ë¯¸ë“¤ì›¨ì–´ì—ì„œ yield put({ type: 'ACCOUNTS_FETCHED', accounts }) ë¡œ ì•¡ì…˜ì„ ë‹¤ì‹œ dispatchí•œ ê²ƒì„
ê¸°ì–µí•  ê²ë‹ˆë‹¤. ì´ ì•¡ì…˜ì´ accountsReducerì— ì „ë‹¬ë˜ë©´ ìƒˆë¡œìš´ ìƒíƒœ, ì¦‰ fetchí•œ ê³„ì •ì„ ìƒíƒœì— ì €ì¥í•˜ê²Œ ë˜ê³  ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë  ê²ƒì…ë‹ˆë‹¤.

{% highlight javascript %}
const initialState = {}

const accountsReducer = (state = initialState, action) => {
  if (action.type === 'ACCOUNTS_FETCHING') {
    return state
  }

  if (action.type === 'ACCOUNTS_FETCHED') {
    return Object.assign({}, state, action.accounts)
  }

  return state
}

export default accountsReducer
{% endhighlight %}

ë‹¤ì‹œ HomeContainerë¡œ ëŒì•„ê°€ ë³´ê² ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ mapStateToPropsë¥¼ í†µí•´ ë“œë¦¬ì¦ì´ ì œê³µí•˜ëŠ” storeì˜ ìƒíƒœë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¤ì‹œ ë§í•´ì„œ ê³„ì •ì€ state.accountsê°€ accountsë¼ëŠ” keyë¡œ ì „ë‹¬ë˜ë¯€ë¡œ this.props.accountsë¡œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.

this.props.accounts[0]ëŠ” ë©”íƒ€ë§ˆìŠ¤í¬ì—ì„œ Dappì— ì—°ê²°ëœ ê³„ì •ì„ ë‚˜íƒ€ë‚´ë©°,
ì”ì•¡ì€ this.props.accountBalances[this.props.accounts[0]] ì´ëŸ° ì‹ì´ ë  ê²ë‹ˆë‹¤.

{% highlight javascript %}
import Home from './Home'
import { drizzleConnect } from 'drizzle-react'

// May still need this even with data function to refresh component on updates for this contract.
const mapStateToProps = state => {
  return {
    accounts: state.accounts,
    SimpleStorage: state.contracts.SimpleStorage,
    TutorialToken: state.contracts.TutorialToken,
    drizzleStatus: state.drizzleStatus
  }
}

const HomeContainer = drizzleConnect(Home, mapStateToProps);

export default HomeContainer
{% endhighlight %}

ì»¨íŠ¸ë™íŠ¸ì˜ ë©”ì†Œë“œëŠ” ì–´ë–»ê²Œ í˜¸ì¶œí•  ìˆ˜ ìˆì„ê¹Œìš”? ë“œë¦¬ì¦ì€ [drizzle-react-component][drizzle-rc]ë¥¼ ì œê³µí•˜ê³  ìˆì–´ì„œ ì‰½ê²Œ ì»¨íŠ¸ë™íŠ¸ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ìƒíƒœ ë³€ìˆ˜ ê°’ì„
ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `<ContractData/>` ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% highlight html %}
<ContractData contract="SimpleStorage" method="storedData" />
{% endhighlight %}

ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´ ì•„ì˜ˆ ë²„íŠ¼ê¹Œì§€ ë§Œë“¤ì–´ì£¼ëŠ” `<ContractForm/>` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

{% highlight html %}
<ContractForm contract="SimpleStorage" method="set" />
{% endhighlight %}

ë¬¼ë¡  drizzle-react-componentë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë‚´ê°€ ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë˜ ë‚´ê°€ ì›í•˜ëŠ” redux-saga í•¨ìˆ˜ë¥¼ ì¶”ê°€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. reducerë„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë“œë¦¬ì¦ì€ ê°œë°œìê°€ ì›í•˜ëŠ” ê²ƒì„ í•  ìˆ˜ ìˆë„ë¡ í™•ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.


### 5. drizzle, Truffle drizzle box

ë§ˆì§€ë§‰ìœ¼ë¡œ drizzle, drizzle-react ë“±ê³¼ ê°™ì€ ëª¨ë“ˆì„ ì§ì ‘ ì„¤ì¹˜í•˜ëŠ” ê²ƒê³¼ Truffle drizzle boxë¥¼ í†µí•´ ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ëŠ” ê²ƒì€ ì°¨ì´ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ë‘ íŒ¨í‚¤ì§€ì˜ ë²„ì „ì´ ì°¨ì´ê°€ ë‚˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
Truffle drizzle boxì— ìˆëŠ” ëª¨ë“ˆ ë²„ì „ì´ êµ¬ë²„ì „ì¼ ê°€ëŠ¥ì„±ì´ ë§ìŠµë‹ˆë‹¤. ì´ë¥¼í…Œë©´ ë‹¤ìŒê³¼ ê°™ì€ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. react ë²„ì „ì´ 16.3 ì´ìƒì¼ ë•ŒëŠ” ì¢€ ë” ì—…ë°ì´íŠ¸ëœ ì‚¬í•­ë“¤ì„ ë°˜ì˜í•œ
drizzle ëª¨ë“ˆì´ ì œê³µë©ë‹ˆë‹¤(ì•„ì§ í•˜ìœ„ í˜¸í™˜ì„±ì´ ìœ ì§€ë˜ê³  ìˆì§€ë§Œ ì£¼ì˜í•  í•„ìš”ê°€ ìˆë‹¤ëŠ” ë§ì…ë‹ˆë‹¤).

{% highlight javascript %}
// 1. Import drizzle, drizzle-react, and your contract artifacts.
import { Drizzle, generateStore } from "drizzle";
import { DrizzleContext } from "drizzle-react";
import SimpleStorage from "./contracts/SimpleStorage.json";

// 2. Setup the drizzle instance.
const options = { contracts: [SimpleStorage] };
const drizzleStore = generateStore(options);
const drizzle = new Drizzle(options, drizzleStore);

// ...

// 3. Pass the drizzle instance into the provider and wrap it
//    around your app.
<DrizzleContext.Provider drizzle={drizzle}>
  <App />
</DrizzleContext.Provider>
{% endhighlight %}

ë³´ë‹¤ ìì„¸í•œ ì‚¬í•­ì€ [ì—¬ê¸°][drizzle-r]ë¥¼ ì°¸ì¡°í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ğŸš€

[truffle-box]: https://truffleframework.com/boxes
[drizzle-doc]: https://truffleframework.com/docs/drizzle/overview
[drizzle-gh]: https://github.com/trufflesuite/drizzle
[drizzle-rc]: https://truffleframework.com/docs/drizzle/react/react-components
[drizzle-r]: https://github.com/trufflesuite/drizzle-react

