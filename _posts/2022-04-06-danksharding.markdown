---
layout: post
title: "Danksharding"
date: 2022-04-06
img: leaves.jpg # Add image post (optional)
description: # Add post description (optional)
tag: [ethereum, danksharding]
---

ìµœê·¼ì— ì´ë”ë¦¬ì›€ì˜ ë ˆì´ì–´ 2 ì†”ë£¨ì…˜ë“¤ì´ ë‹¤ì–‘í•˜ê²Œ ë‚˜ì˜¤ë©´ì„œ ì„±ëŠ¥ ê°œì„ ì— ëŒ€í•œ ê¸°ëŒ€ê°ë„ í•¨ê»˜ ì˜¤ë¥´ê³  ìˆìŠµë‹ˆë‹¤. ë ˆì´ì–´ 2ì˜ ëª©ì ì€ "Scaling Ethereum without compromising on security or decentralization." ì´ë¼ê³  ìš”ì•½í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. 
ê±°ë˜ ì¤‘ê°œìë“¤ì„ ì¼ë°©ì ìœ¼ë¡œ ë¯¿ê¸° ë³´ë‹¤ëŠ” í˜„ì¬ íƒˆì¤‘ì•™í™”ëœ "trustless" ì´ë”ë¦¬ì›€ì— ê±°ë˜ ë°ì´í„°ì™€ ê²€ì¦ ìë£Œë¥¼ ê¸°ë¡í•˜ì—¬(í•©ì˜ë¥¼ ê±°ì³) ë ˆì´ì–´ 2ì˜ ì‹ ë¢°ì„±ì„ ë‹´ë³´í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ê·¸ëŸ°ë° ê¸°ëŒ€ê°€ ì»¤ì§„ ë§Œí¼ ì‹¤ë§ ì—­ì‹œ ê·¸ì— ë¹„ë¡€í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìƒê°ì²˜ëŸ¼ ë ˆì´ì–´ 2ê°€ í™œì„±í™”ë˜ì§€ ëª»í•˜ê³  ìˆë‹¤ëŠ” ë¹„íŒì´ ìˆìŠµë‹ˆë‹¤. 
ë†’ì€ ê°€ìŠ¤ë¹„ë¡œ ì¸í•˜ì—¬ ê±°ë˜ ë°ì´í„°, ì¦‰ ë¡¤ì—… ë°ì´í„°ë¥¼ í•©ì˜ ë ˆì´ì–´ì¸ ì´ë”ë¦¬ì›€ì— ê¸°ë¡í•˜ëŠ” ë¹„ìš©ì´ ì¦ê°€í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

[ë ˆì´ì–´ 2ì˜ ê±°ë˜ ë¹„ìš©][l2fee]ì„ ë³´ë©´(2022ë…„ 4ì›”) ì´ë” ì†¡ê¸ˆì˜ ê²½ìš° ì•½ 3-6ë°°ì˜ ë¹„ìš© ì ˆê° íš¨ê³¼ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì˜¤ë˜ ì „ ë¹„íƒˆë¦­ ë¶€í…Œë¦°ì€ ìˆ˜ìˆ˜ë£Œê°€ 5ì„¼íŠ¸ë¥¼ ë„˜ì–´ê°€ë©´ 
ì•ˆëœë‹¤ê³  ë§í•œ ì ì´ ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆ ìˆ˜ì¤€ê³¼ ë¹„êµí•˜ë©´ ì•„ì§ë„ 10ë°° ì´ìƒ ì €ë ´í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ë”ë¦¬ì›€ì˜ ì„±ëŠ¥ ê°œì„ ì€ ìƒ¤ë”©(Sharding)ìœ¼ë¡œ ì‹¤í˜„ë©ë‹ˆë‹¤. ë¹„íƒˆë¦­ ë¶€í…Œë¦°ì´ ì“´ [ê¸€][blob-tx]ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.  

>However, even these fees are too expensive for many users. The long-term solution to the long-term inadequacy of rollups by themselves has always been data sharding, which would add ~16 MB per block of dedicated data space to the chain 
that rollups could use. However, data sharding will still take a considerable amount of time to finish implementing and deploying. 

í˜„ì¬ ë ˆì´ì–´ 2ì˜ ìˆ˜ìˆ˜ë£ŒëŠ” ì¼ë°˜ ì‚¬ìš©ìë“¤ì—ê²Œ ì—¬ì „íˆ ë†’ê³ , ë˜ ì¥ê¸°ì ìœ¼ë¡œ ë³´ë©´ ë ˆì´ì–´ 2 ë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•œ ì„±ëŠ¥ ê°œì„ ì´ ì´ë£¨ì–´ì§€ê¸° ì–´ë µê¸° ë•Œë¬¸ì— 
ì•ìœ¼ë¡œ ë„ì…ë  ë°ì´í„° ìƒ¤ë”©ì˜ ì €ì¥ ì˜ì—­(ë¸”ë¡ë‹¹ 16 MB)ì— ë¡¤ì—… ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ë ˆì´ì–´ 2ì˜ í™œìš©ë„ë¥¼ ëŒì–´ì˜¬ë¦¬ìëŠ” ì·¨ì§€ì…ë‹ˆë‹¤. 

ì›ë˜ ì´ë”ë¦¬ì›€ PoSì˜ ë¡œë“œë§µ Phase 1 ìƒ¤ë”©ì˜ ëª©ì ì€ í˜„ì¬ ë‹¨ì¼ ì²´ì¸ì„ 64ê°œì˜ ìƒ¤ë“œ ì²´ì¸ìœ¼ë¡œ ë¶„í• í•´ì„œ ê±°ë˜ë¥¼ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ë¹„ì½˜ ì²´ì¸ì˜ ê²€ì¦ìë“¤ë¡œ êµ¬ì„±ëœ committeeë¥¼ ë‹¤ìˆ˜ì˜ ìƒ¤ë“œì— ê°ê° ë°°ì¹˜í•˜ì—¬ ìƒ¤ë“œ ë¸”ë¡ì„ ë§Œë“¤ê³  ë¹„ì½˜ ì²´ì¸ì— ê·¸ ë‚´ì—­ì„ ê¸°ë¡í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. íŠ¸ëœì­ì…˜ì€ ì‹¤í–‰ ë ˆì´ì–´ì—ì„œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— ìƒ¤ë“œ ì²´ì¸ì—ì„œëŠ” ë°ì´í„°ë§Œ ì €ì¥í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìƒ¤ë“œ ì²´ì¸ì„ "ë°ì´í„° ë ˆì´ì–´"ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.

ê° ìƒ¤ë“œëŠ” ì‹¤í–‰ ë ˆì´ì–´ë¥¼ ê°€ì§€ê³  ìˆê²Œ ë˜ê³  í˜„ì¬ ì´ë”ë¦¬ì›€ë„ EVM ì‹¤í–‰ ì—”ì§„ì´ ë‹¬ë¦° í•œ ìƒ¤ë“œë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆê³¼ ë¹„êµí•´ë³´ë©´ ì‹¤í–‰ ë ˆì´ì–´ëŠ” í˜„ì¬ ë ˆì´ì–´ 2ê°€ ë‹´ë‹¹í•˜ê³  (ë°ì´í„° ë ˆì´ì–´ì— í•´ë‹¹í•˜ëŠ” ìƒ¤ë“œ ì²´ì¸ì€ ì•„ì§ ì—†ìœ¼ë¯€ë¡œ) ì´ë”ë¦¬ì›€ ë¸”ë¡ì— ë¡¤ì—… ë°ì´í„°(calldata)ë¥¼ ì €ì¥í•˜ëŠ” êµ¬ì¡°ë¡œ ìƒê°í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë° ë ˆì´ì–´ 2ì˜ ë¹„ìš©ì„ ì²´ê°ì ìœ¼ë¡œ í¬ê²Œ ë‚®ì¶œ ìˆ˜ ì—†ëŠ” ì´ìœ  ì¤‘ í•˜ë‚˜ëŠ” ë¡¤ì—… ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” íŠ¸ëœì­ì…˜ì€ ì–´ì°¨í”¼ ì´ë”ë¦¬ì›€ì— ì „ì†¡í•˜ê¸° ìœ„í•´ ê°€ìŠ¤ë¹„ë¥¼ ë‚´ì•¼ í•˜ë¯€ë¡œ 
ê°€ìŠ¤ë¹„ê°€ ë§¤ìš° ë†’ì€ ìƒí™©ì—ì„œëŠ” ë ˆì´ì–´ 2ì˜ íš¨ê³¼ê°€ ê°ì†Œí•œë‹¤ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.

ë¹„íƒˆë¦­ ë¶€í…Œë¦°ì€ ë‘ ê°€ì§€ ì •ë„ì˜ ì œì•ˆì„ ë‚´ë†“ì€ ìƒíƒœì…ë‹ˆë‹¤. [EIP-4488][eip-4488]ê³¼ [EIP-4844][eip-4844]ì¸ë° ì¥ê¸°ì ì¸ ë°©í–¥ê³¼ ì¼ì¹˜í•˜ëŠ” ê²ƒì€ EIP-4844ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ "stop-gap" ì†”ë£¨ì…˜ì„ ì œì•ˆí•©ë‹ˆë‹¤.

>This EIP provides a stop-gap solution until that point by implementing the transaction format that would be used in sharding, 
but not actually sharding those transactions. Instead, the data from this transaction format is simply part of the beacon chain 
and is fully downloaded by all consensus nodes (but can be deleted after only a relatively short delay). 
Compared to full data sharding, this EIP has a reduced cap on the number of these transactions that can be included, 
corresponding to a target of 1 MB per block and a limit of 2 MB.

ì•ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ ìƒ¤ë”© ë°ì´í„°ì˜ ì €ì¥ ì˜ì—­ì„ ë¡¤ì—… ë°ì´í„° ì „ìš© ì €ì¥ ê³µê°„ìœ¼ë¡œ í™œìš©í•˜ìëŠ” ê²ƒì…ë‹ˆë‹¤. í–¥í›„ ìƒ¤ë”©ì˜ ì„¤ê³„ì™€ë„ í˜¸í™˜(forwards-compatible)ë˜ë„ë¡ 
êµ¬í˜„í•˜ê³  ë˜ ë¸”ë¡ ë‹¹ ì•½ 1 MBì—ì„œ ìµœëŒ€ 2 MBë¡œ ì œí•œí•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì—¬ê¸°ì„œ "shard blob transaction"ì€ íŠ¸ëœì­ì…˜ íƒ€ì…ì„ 0x05ë¡œ ì§€ì •í•œ í†µìƒì ì¸ L1 íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì·¨ê¸‰í•˜ì—¬ ì „ì†¡ëœ ë°ì´í„°ë¥¼ ë¹„ì½˜ ì²´ì¸ì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤. ì§€ê¸ˆ ë¡¤ì—… ë°ì´í„°ëŠ” calldataë¥¼ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ì§€ë§Œ ë‚˜ì¤‘ì— ìƒ¤ë”©ì´ êµ¬í˜„ë˜ë©´ ë¡¤ì—… ë°ì´í„°ëŠ” "shard blob"ì— í•´ë‹¹ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. 

"blob"ì´ë¼ê³  í‘œí˜„í•œ ê²ƒì€ ìƒ¤ë”© [ìŠ¤í™][shard-spec]ì— ë”°ë¥´ë©´ "Data with commitments and meta-data, like a flattened bundle of L2 transactions"ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤. "blob"ì´ë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•œ ê²ƒì€ í˜„ì¬ ë‹¨ì¼ ì²´ì¸ì˜ ì „ì²´ ë°ì´í„°ë¥¼ ê° ë…¸ë“œë“¤ì´ ê°€ì§€ê³  ìˆëŠ” ê²ƒê³¼ ë¹„êµí•˜ì—¬ ìƒ¤ë”©ëœ(ë‚˜ëˆ„ì–´ì§„, ë¶€ë¶„) ë°ì´í„°ë¼ëŠ” ì˜ë¯¸ë¡œ, ê·¸ ìì²´ë¡œ ê²€ì¦ ê°€ëŠ¥í•œ ì •ë³´(commitment)ë„ í•¨ê»˜ ê°€ì§€ê³  ìˆëŠ” í˜•íƒœë¡œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.  

- Data: A list of KZG points, to translate a byte string into  
- Blob: Data with commitments and meta-data, like a flattened bundle of L2 transactions.  
- Builder: Independent actor that builds blobs and bids for proposal slots via fee-paying blob-headers, responsible for availability.  
- Shard proposer: Validator taking bids from blob builders for shard data opportunity, co-signs with builder to propose the blob.  

EIP-4844ëŠ” ìƒˆë¡œìš´ ìƒ¤ë”© ë°©ì‹ì¸ [Danksharding][danksharding]ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.

>Here is an alternative proposal: Add a new type of transaction that can contain additional sharded data as calldata. 
The block is then constructed by a single block builder (which can be different from the proposer using proposer builder separation), 
and includes normal transactions as well as transactions with sharded calldata. 
This is efficient because it means that tight integrations between rollups and L1 become possible, 
and it is expected that this â€œsuper-block-builderâ€ strategy will emerge in practice anyway in order to maximize MEV extraction.

ì‚¬ì‹¤ Dankshardingì€ ìƒ¤ë”©ì˜ ë³¸ë˜ ëª©ì ì—ì„œ ë‹¤ì†Œ ì´íƒˆí•œ ìƒ¤ë”©ì´ë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ìƒ¤ë”©ì´ë€ ê° ìƒ¤ë“œì—ì„œ íŠ¸ëœì­ì…˜ì„ ë‚˜ëˆ„ì–´ (ë³‘ë ¬)ì²˜ë¦¬í•˜ëŠ” ê²ƒì¸ë° 
Dankshardingì€ ë°ì´í„° ê°€ìš©ì„±(Data Availability)ë§Œì„ ë³´ì¥í•˜ê³  ì‹¤í–‰ì€ ì˜¤í”„-ì²´ì¸, ì¦‰ ë ˆì´ì–´ 2ì—ì„œ í•˜ëŠ” ê²ƒì„ ì „ì œë¡œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë§í•˜ìë©´ ì„±ëŠ¥ ê°œì„ ì˜ ë‘ ê°€ì§€ ì¸¡ë©´ì—ì„œ, 
ì²˜ë¦¬ ì†ë„ëŠ” ë ˆì´ì–´ 2ì—ì„œ ì˜¬ë¦¬ê³  ìˆ˜ìˆ˜ë£ŒëŠ” ë°ì´í„° ìƒ¤ë”©ì„ í†µí•´ ë‚®ì¶”ë ¤ëŠ” ì˜ë„ë¼ê³  ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

ì´ ì œì•ˆì—ì„œëŠ” ê° ìƒ¤ë“œì— ë°°ì¹˜ëœ committeeì—ì„œ ìƒ¤ë“œ ë¸”ë¡ì„ ë§Œë“œëŠ” ëŒ€ì‹  ìƒˆë¡œìš´ íƒ€ì…ì˜ íŠ¸ëœì­ì…˜, ì¦‰ "blob transaction"ì„ ì •ì˜í•˜ê³  
ë¸”ë¡ ìƒì„±ì í•˜ë‚˜ê°€ ì´ íŠ¸ëœì­ì…˜ë“¤ì„ ë¹„ì½˜ ë¸”ë¡ì— ì €ì¥í•˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. blob íŠ¸ëœì­ì…˜ì€ ê±°ë˜ íŠ¸ëœì­ì…˜ì´ ì•„ë‹ˆë¼ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” íŠ¸ëœì­ì…˜ì…ë‹ˆë‹¤. "The Merge"ê°€ ì™„ë£Œë˜ë©´ ë¹„ì½˜ ì²´ì¸ ê²€ì¦ìë“¤ì´ ê¸°ì¡´ ì´ë”ë¦¬ì›€(EL)ì˜ íŠ¸ëœì­ì…˜ê³¼ ìƒ¤ë“œ blob íŠ¸ëœì­ì…˜ê¹Œì§€ ì²˜ë¦¬í•˜ê²Œ ë˜ëŠ” ì…ˆì¸ë°, ì´ë ‡ê²Œ ë˜ë©´ ìƒë‹¹í•œ ë¶€í•˜ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” 
í•˜ë“œì›¨ì–´ê°€ í•„ìš”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤("super-block-builder" ë¼ê³  í‘œí˜„í•œ ì´ìœ ).

ê·¸ë˜ì„œ PBS(Proposer/Builder Separation)ë¼ëŠ” ë°©ì‹ì„ ë„ì…í•˜ì—¬ ë¸”ë¡ ë°”ë””ë¥¼ ë§Œë“œëŠ” ìƒì„±ì(Builder)ì™€ ë¸”ë¡í—¤ë”ë¥¼ ë§Œë“¤ì–´ì„œ ìµœì¢… ë¸”ë¡ì„ 
ë„¤íŠ¸ì›Œí¬ì— ì „íŒŒí•˜ëŠ” ì œì•ˆì(Proposer)ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤. ë§ˆì¹˜ ì±„êµ´ìì²˜ëŸ¼ ì‹¤ì œ íŠ¸ëœì­ì…˜ì„ ëª¨ìœ¼ëŠ” ê²ƒì€ ìƒì„±ìì˜ ì—­í• ì´ê³  ì œì•ˆì(í˜„ì¬ ë¹„ì½˜ ì²´ì¸ ê²€ì¦ìë“¤)ëŠ” ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ë¸”ë¡ ë°”ë””ë“¤ ì¤‘ì— í•˜ë‚˜ë¥¼ ì„ íƒí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤(ìƒì„±ìê°€ ë¸”ë¡ì„ ë¹„ë”©í•˜ê³  ì œì•ˆìê°€ ì„ íƒ).

ì´ëŸ¬í•œ "ìˆ˜í¼ ë¸”ë¡" ìƒì„±ìëŠ” ëˆ„êµ¬ë‚˜ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê²€ì—´ì˜ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ìƒì„±ìëŠ” honest minorityì— ì˜ì¡´). ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ê²€ì—´ ì €í•­ ëª©ë¡(crList)ë¥¼ ì œì•ˆìê°€ ë§Œë“¤ì–´ì„œ ë¸Œë¡œë“œìºìŠ¤íŒ…í•©ë‹ˆë‹¤. crListëŠ” íŠ¸ëœì­ì…˜ í’€ì— ìˆëŠ” ì„ì˜ì˜ íŠ¸ë™ì­ì…˜ë“¤ì…ë‹ˆë‹¤. ë¸”ë¡ ìƒì„±ìëŠ” crListì— ìˆëŠ” íŠ¸ëœì­ì…˜ë“¤ì„ í¬í•¨ì‹œì¼œì„œ ë¸”ë¡ì„ ë§Œë“¤ì–´ì•¼ í•˜ë¯€ë¡œ ìƒì„±ìê°€ ë¸”ë¡ì— ì €ì¥ë˜ëŠ” íŠ¸ëœì­ì…˜ì„ ì„ì˜ë¡œ ì œì™¸í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.

ë‹¤ì‹œ ë§í•´ì„œ ë¸”ë¡ì„ ë§Œë“œëŠ” ì¼, ì¦‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¼ì€ ë‹¤ì†Œ ë†’ì€ í•˜ë“œì›¨ì–´ ì„±ëŠ¥ì„ ìš”êµ¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ê°€ ì¶©ë¶„í•œ ì‚¬ëŒë“¤ì—ê²Œ ì¼ì„í•˜ë ¤ëŠ” ì˜ë„ë¥¼ ê°€ì§€ê³  
ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ê²ƒì„ ê²€ì¦í•˜ëŠ” ê²ƒì€ ë¶ˆíŠ¹ì • ë‹¤ìˆ˜(honest majorityì— ì˜ì¡´), ì¦‰ í˜„ì¬ ë¹„ì½˜ ì²´ì¸ì˜ ê²€ì¦ìë“¤ì´ ìˆ˜í–‰í•˜ë„ë¡ í•˜ë¯€ë¡œì¨ íƒˆì¤‘ì•™í™”ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì›ë˜ ê° ìƒ¤ë“œì—ì„œ ê±°ë˜ê°€ ì²˜ë¦¬ë˜ë©´ ìƒ¤ë“œë§ˆë‹¤ ìˆ˜ìˆ˜ë£Œê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ”ë°, Dankshardingì—ì„œëŠ” blob íŠ¸ëœì­ì…˜ì˜ íƒ€ì…ì„ í•˜ë‚˜ ë” ì¶”ê°€í•  ë¿ì´ë¯€ë¡œ ì¢€ë” ê°„ì†Œí™”ëœ ìˆ˜ìˆ˜ë£Œ ì²˜ë¦¬ê°€ 
ê°€ëŠ¥í•©ë‹ˆë‹¤(ì¼ë°˜ íŠ¸ëœì­ì…˜ê³¼ ë‹¤ë¥¸ ìˆ˜ìˆ˜ë£Œë¥¼ ì ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥). ì´ê²ƒì„ "merged fee market"ì´ë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

>The main innovation introduced by Danksharding (see also: [1] [2] [3]) is the merged fee market: instead of there being a fixed number of 
shards that each have distinct blocks and distinct block proposers, in Danksharding there is only one proposer that chooses all transactions 
and all data that go into that slot.

>To avoid this design forcing high system requirements on validators, we introduce proposer/builder separation (PBS) (see also: [1] [2]): 
a specialized class of actors called block builders bid on the right to choose the contents of the slot, and the proposer need only 
select the valid header with the highest bid. Only the block builder needs to process the entire block (and even there, itâ€™s possible 
to use third-party decentralized oracle protocols to implement a distributed block builder); 
all other validators and users can verify the blocks very efficiently through data availability sampling (remember: the â€œbigâ€ part of the block is 
just data).

Dankshardingì˜ ì„¤ê³„ëŠ” ì•„ì§ ë…¼ì˜ê°€ ë” í•„ìš”í•˜ê³  ìŠ¤í™ì´ ì •í•´ì§€ë”ë¼ë„ êµ¬í˜„ ê³¼ì •ì—ì„œ ë¬¸ì œì ë“¤ì´ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ì¼ë‹¨ í”„ë¡œí† íƒ€ì…ì²˜ëŸ¼ ì¼ë¶€ ê¸°ëŠ¥ì„ ë¨¼ì € êµ¬í˜„í•˜ëŠ” ë°©ì‹ë„ ìƒê°í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì´ [proto-Danksharding][proto-dank]ì…ë‹ˆë‹¤. 

ì•ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì´ìœ ëŠ” ë°ì´í„° ê°€ìš©ì„±ì„ ì œê³µí•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ê±°ë˜ì˜ ê²°ê³¼(ìƒíƒœ ì „ì´)ê°€ ì˜¬ë°”ë¥¸ì§€ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ ê³¼ì •ì—ì„œ ë°œìƒí•œ ë°ì´í„°ë¥¼ ì¼ì • ê¸°ê°„ ì €ì¥í•  í•„ìš”ê°€ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.  

ë¸”ë¡ì²´ì¸ì—ì„œ ê±°ë˜ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ê²Œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” ë¨¸í´ íŠ¸ë¦¬ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì–´ë–¤ ë¸”ë¡ì— ì €ì¥ëœ ê±°ë˜ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë¨¸í´ ì¦ëª…ê³¼ ë¨¸í´ ë£¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Dankshardingì—ì„œëŠ” ë¨¸í´ íŠ¸ë¦¬ ëŒ€ì‹  "KZG commitment"ë¼ëŠ” ì•”í˜¸í•™ ì´ë¡ ì„ ì ìš©í•©ë‹ˆë‹¤. 

[Danksharding ì„¸ë¯¸ë‚˜][danksharding-webinar]ì—ì„œ Dankrad Feistì˜ ì„¤ëª…ì„ ì¸ìš©í•˜ë©´ KZG commitmentëŠ” polynomial commitmentì˜ í•œ ì¢…ë¥˜ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜í•™ì  íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

- ë‹¤í•­ì‹ fì— ëŒ€í•œ commitment(commitment to polynomial) = C(f)
- ProverëŠ” zì˜ proofë¥¼ ê³„ì‚° = Ï€(f,z)
- VerifierëŠ” C, Ï€, y, zë¥¼ ì‚¬ìš©í•˜ì—¬ f(z) = y ì„ì„ í™•ì¸ 

ë¨¸í´ íŠ¸ë¦¬ì—ì„œëŠ” ë°ì´í„°ë“¤ì„ ì°¨ë¡€ë¡œ í•´ì‹œí•˜ì—¬ ë¨¸í´ ë£¨íŠ¸ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ë°, polynomial commitmentì—ì„œëŠ” ì´ë“¤ ë°ì´í„°ê°€ ì–´ë–¤ ë‹¤í•­ì‹ì˜ ê°’ì´ ëœë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. 


EIP-4844ì— ìˆëŠ” `BlobTransaction`ì€ í˜„ì¬ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ë”ë¦¬ì›€ì˜ íŠ¸ëœì­ì…˜ì€ EIP-2718ì— ì˜í•´ íŠ¸ëœì­ì…˜ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ íŠ¸ëœì­ì…˜ íƒ€ì…ì„ ë³„ë„ë¡œ ì§€ì •í•˜ì—¬ ì¼ë°˜ íŠ¸ëœì­ì…˜ê³¼ êµ¬ë¶„í•©ë‹ˆë‹¤. 

```
class SignedBlobTransaction(Container):
    message: BlobTransaction
    signature: ECDSASignature

class BlobTransaction(Container):
    chain_id: uint256
    nonce: uint64
    priority_fee_per_gas: uint256
    max_basefee_per_gas: uint256
    gas: uint64
    to: Union[None, Address] # Address = Bytes20
    value: uint256
    data: ByteList[MAX_CALLDATA_SIZE]
    access_list: List[AccessTuple, MAX_ACCESS_LIST_SIZE]
    blob_versioned_hashes: List[VersionedHash, MAX_VERSIONED_HASHES_LIST_SIZE]
```    

BlobTransactionì€ ì¼ë°˜ íŠ¸ëœì­ì…˜ì²˜ëŸ¼ data í•„ë“œì— calldataë¥¼ ìš´ë°˜í•©ë‹ˆë‹¤. MAX_CALLDATA_SIZEëŠ” 16M(2**24)ë¡œ ì§€ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤(í•œ ìŠ¬ë¡¯ì—ì„œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìƒ¤ë“œ ë°ì´í„°ì˜ ìµœëŒ€ í¬ê¸°ëŠ” 16MB). ì´ íŠ¸ëœì­ì…˜ì€ ë‹¤ì‹œ ì•„ë˜ì™€ ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë˜í¼ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.

```
class BlobTransactionNetworkWrapper(Container):
    tx: SignedBlobTransaction
    # KZGCommitment = Bytes48
    blob_kzgs: List[KZGCommitment, MAX_TX_WRAP_KZG_COMMITMENTS]
    # BLSFieldElement = uint256
    blobs: List[Vector[BLSFieldElement, FIELD_ELEMENTS_PER_BLOB], LIMIT_BLOBS_PER_TX]
```

`blob_kzgs`ëŠ” blobsì— ëŒ€í•œ ê°ê°ì˜ KZG commitment ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤. blobsëŠ” "ìœ í•œì²´ ìœ„ì˜ ë‹¤í•­ì‹(polynomial over finite field)"ìœ¼ë¡œ 4096ê°œì˜ ì›ì†Œ(BLSFieldElement)ë¡œ ì´ë£¨ì–´ì§„ ë²¡í„°ì…ë‹ˆë‹¤. KZG commitmentëŠ” ì´ê²ƒì— ëŒ€í•œ commitmentë¥¼ ê³„ì‚°í•œ ê°’ì´ ë©ë‹ˆë‹¤. ìš”ì•½í•˜ë©´ ë°ì´í„°ì™€ ê·¸ê²ƒì„ ê²€ì¦í•  ìˆ˜ ìˆëŠ” ì•”í˜¸í•™ì  ê²€ì¦ ë°ì´í„°ë“¤ì´ í•¨ê»˜ ë˜í•‘ë˜ì–´ ìˆìŠµë‹ˆë‹¤(ìˆ˜í•™ì ìœ¼ë¡œ ì •í™•í•˜ê²Œ ì´í•´í•˜ëŠ” ê²ƒì´ ì–´ë µì§€ë§ŒğŸ¤”).

ì˜µí‹°ë¯¸ìŠ¤í‹± ë¡¤ì—…ê³¼ ZK ë¡¤ì—…ì—ì„œ `blob_kzg`ì™€ `blobs`ë¥¼ ê°ê° validity proofì™€ fraud proofë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ 
"precompile"ì„ ì œê³µí•˜ëŠ” ê²ƒë„ EIP-4844ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤(point evaluation precompile, blob verification precompile). ì˜¨ì²´ì¸ì—ì„œ ë°ì´í„° ê°€ìš©ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤ëŠ” ì˜ë¯¸ê°€ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

proto-Dankshardingì€ ì•„ì§ ì—°êµ¬ ë‹¨ê³„ì— ìˆìŠµë‹ˆë‹¤. ë˜ "The Merge"ë¼ëŠ” ì¤‘ìš”í•œ í•˜ë“œí¬í¬ ì´í›„ì— ì ìš©ë  ê°€ëŠ¥ì„±ì´ ë§ìŠµë‹ˆë‹¤. ìµœì†Œ 1ë…„ ì •ë„ëŠ” ë” ê¸°ë‹¤ë ¤ì•¼ êµ¬ì²´ì ì¸ 
ì„¸ë¶€ ë‚´ìš©ë“¤ì´ ë‚˜ì˜¬ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤.


[l2fee]: https://l2fees.info/
[blob-tx]: https://notes.ethereum.org/@vbuterin/blob_transactions_simple
[eip-4488]: https://eips.ethereum.org/EIPS/eip-4488
[eip-4844]: https://eips.ethereum.org/EIPS/eip-4844
[shard-spec]: https://github.com/ethereum/consensus-specs/blob/dev/specs/sharding/beacon-chain.md
[danksharding]: https://notes.ethereum.org/@dankrad/new_sharding
[proto-dank]: https://notes.ethereum.org/@vbuterin/proto_danksharding_faq
[danksharding-webinar]: https://www.youtube.com/watch?v=e9oudTr5BE4